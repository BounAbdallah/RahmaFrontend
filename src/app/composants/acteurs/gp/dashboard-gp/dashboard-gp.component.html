<div class="container">
  <!-- Main Content -->
  <aside class="sidebar">
      <!-- Logo -->
      <div class="logo">
          <img src="./../../../../../assets/images/logos_icons/logoM2.png" alt="">
      </div>

      <ul>
          <!-- Dashboard -->
          <li><a href="#">
              <i class="fas fa-tachometer-alt"></i>
              Tableau de bord
          </a></li>

          <!-- Orders -->
          <li><a href="#">
              <i class="fas fa-box"></i>
              Commandes
          </a></li>

          <!-- Add Announcement -->
          <li><a (click)="openAnnonceFormModal()">
              <i class="fas fa-plus-square"></i>
              Ajouter une Annonce
          </a></li>

          <!-- Reservations -->
          <li><a href="/reservationGp">
              <i class="fas fa-calendar-check"></i>
              Mes réservations
          </a></li>

          <!-- Settings -->
          <li><a href="#">
              <i class="fas fa-cog"></i>
              Paramètres
          </a></li>
      </ul>
  </aside>

  <!-- Header -->
  <div class="top-bar">
      <h4>Tableau de bord GP</h4>
      <h5>Bienvenue sur votre tableau de bord</h5>
      <div class="buttons">
          <!-- Notifications Button -->
          <button>
              <i class="fas fa-bell"></i>
          </button>
          <!-- Logout Button -->
          <button class="logoutbtn" (click)="logout()">
              <i class="fas fa-sign-out-alt"></i>
          </button>
          <!-- Toggle Button -->
<button (click)="toggleSidebar()" class="toggle-btn">☰ Menu</button>

<!-- Sidebar -->
<aside class="sidebare" [class.open]="isSidebarOpen">
    <!-- Logo -->
    <div class="logo">
        <img src="./../../../../../assets/images/logos_icons/logoM2.png" alt="Logo">
    </div>

    <ul>
        <!-- Dashboard -->
        <li><a href="#">
            <i class="fas fa-tachometer-alt"></i>
            Tableau de bord
        </a></li>

        <!-- Orders -->
        <li><a href="#">
            <i class="fas fa-box"></i>
            Commandes
        </a></li>

        <!-- Add Announcement -->
        <li><a (click)="openAnnonceFormModal()">
            <i class="fas fa-plus-square"></i>
            Ajouter une Annonce
        </a></li>

        <!-- Reservations -->
        <li><a href="/reservationGp">
            <i class="fas fa-calendar-check"></i>
            Mes réservations
        </a></li>

        <!-- Settings -->
        <li><a href="#">
            <i class="fas fa-cog"></i>
            Paramètres
        </a></li>
    </ul>
</aside>

      </div>
  </div>

  <div class="main-content">
      <!-- Revenue, Poids, Réservations -->
      <div class="stats">
          <div class="stat-box">
              <p>Nombre d'annonces :</p>
              <h3>{{ statistiques?.nombre_annonces }}</h3>
              <h4>Annonces</h4>
          </div>
          <div class="stat-box">
              <p>Nombre de réservations :</p>
              <h3>{{ statistiques?.nombre_reservations }}</h3>
          </div>
          <div class="stat-box">
              <p>Nombre de colis</p>
              <h3>{{ statistiques?.nombre_colis }}</h3>
              <p>Réservations totales : 342</p>
          </div>
      </div>

      <!-- Mes commandes récentes -->
      <div class="orders">
          <div class="titreRecherche">
              <h4>Mes annonces récentes</h4>

              <!-- Barre de recherche -->
              <div class="search-bar">
                  <input type="text" [(ngModel)]="searchQuery" (input)="filterAnnonces()" placeholder="Rechercher une annonce">
              </div>
          </div>

          <div class="order-cards">
              <div class="card" *ngFor="let annonce of getPaginatedAnnonces().slice(0, 3)">
                  <img [src]="annonce.photo_pays_voyage_provenance" alt="Image de provenance">
                  <div class="card-body">
                      <h5>{{ annonce.pays_destination }} le <span>{{ annonce.date_fin_reception_colis | date:'dd/MM/yyyy' }}</span></h5>
                      <p>{{ annonce.poids_kg }} kg pour cette annonce</p>
                      <button class="btn" (click)="showAnnonces(annonce.id)">Voir les détails</button>
                  </div>
              </div>
          </div>

          <!-- Boutons de pagination -->
          <div class="pagination">
              <button class="btn" (click)="changePage(currentPage - 1)" [disabled]="currentPage === 1">Précédent</button>
              <span>Page {{currentPage}} / {{totalPages}}</span>
              <button class="btn" (click)="changePage(currentPage + 1)" [disabled]="currentPage === totalPages">Suivant</button>
          </div>

          <!-- Modal pour afficher les détails des colis -->
     <!-- Modal pour afficher les détails des colis -->
<div class="modal" *ngIf="isModalVisible">
  <div class="modal-content">
    <span class="close" (click)="closeModal()">&times;</span>

    <div *ngIf="annonce" class="annonce-details">
      <h2>Détails de l'annonce</h2>
      <div class="annonce-info">
        <p><strong>Titre:</strong> {{ annonce.titre }}</p>
        <p><strong>Description:</strong> {{ annonce.description }}</p>
        <p><strong>Pays de provenance:</strong> {{ annonce.pays_provenance }}</p>
        <p><strong>Pays de destination:</strong> {{ annonce.pays_destination }}</p>
      </div>

      <div class="annonce-images">
        <img *ngIf="annonce.photo_pays_voyage_provenance" [src]="annonce.photo_pays_voyage_provenance" alt="Pays de provenance">
        <img *ngIf="annonce.photo_pays_voyage_destination" [src]="annonce.photo_pays_voyage_destination" alt="Pays de destination">
      </div>

      <div class="annonce-stats">
        <p><strong>Poids (kg):</strong> {{ annonce.poids_kg }}</p>
        <p><strong>Statut:</strong> {{ annonce.statut }}</p>
        <p><strong>Conditions:</strong> {{ annonce.condition }}</p>
      </div>
    </div>

    <div class="reservations-section">
      <h3>Réservations associées</h3>
      <table *ngIf="reservationsDetails && reservationsDetails.length > 0" class="responsive-table">
        <thead>
          <tr>
            <th>ID Réservation</th>
            <th>Date de réservation</th>
            <th>Statut</th>
            <th>Colis</th>
            <th>Destinataire</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let reservation of reservationsDetails">
            <td>{{ reservation.id }}</td>
            <td>{{ reservation.date_reservation | date:'dd/MM/yyyy' }}</td>
            <td>{{ reservation.status }}</td>
            <td>{{ reservation.colis_id }} ({{ reservation.colis.poids_kg }} kg)</td>
            <td>{{ reservation.user.prenom }} {{ reservation.user.nom }}</td>
          </tr>
        </tbody>
      </table>
      <div *ngIf="reservationsDetails.length === 0">
        <p>Aucune réservation disponible.</p>
      </div>
    </div>
  </div>
</div>


      </div>
  </div>
</div>
<app-notifications
></app-notifications>
